<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for xVisInterp"><tr><td>xVisInterp</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>xVisInterp</h2>

<h3>Usage</h3>

<pre>
xVisInterp(ls_xyz, interpolation = c("spline", "linear"), nx = 100, ny
= 100, zlim = NULL, nD = c("auto", "2D", "3D"), colkey = TRUE, contour
= FALSE, image = FALSE, clab = c("Value", ""), nlevels = 20, colormap =
"terrain", theta.3D = 40, phi.3D = 20, verbose = TRUE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>ls_xyz</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>interpolation</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>nx</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>ny</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>zlim</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>nD</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>colkey</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>contour</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>image</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>clab</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>nlevels</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>colormap</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>theta.3D</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>phi.3D</code></td>
<td>


</td></tr>
<tr valign="top"><td><code>verbose</code></td>
<td>


</td></tr>
</table>


<h3>Examples</h3>

<pre>
##---- Should be DIRECTLY executable !! ----
##-- ==&gt;  Define data, use random,
##--	or do  help(data=index)  for the standard data sets.

## The function is currently defined as
function (ls_xyz, interpolation = c("spline", "linear"), nx = 100,
ny = 100, zlim = NULL, nD = c("auto", "2D", "3D"), colkey = TRUE,
contour = FALSE, image = FALSE, clab = c("Value", ""), nlevels = 20,
colormap = "terrain", theta.3D = 40, phi.3D = 20, verbose = TRUE)
{
interpolation &lt;- match.arg(interpolation)
nD &lt;- match.arg(nD)
if (class(ls_xyz) == "list") {
ind &lt;- names(ls_xyz) %in% c("x", "y", "z")
ls_xyz &lt;- ls_xyz[ind]
if (length(ls_xyz) != 3) {
return(NULL)
}
}
else if (class(ls_xyz) == "data.frame" | class(ls_xyz) ==
"matrix") {
if (ncol(ls_xyz) == 3) {
ls_xyz &lt;- ls_xyz[, 1:3]
colnames(ls_xyz) &lt;- c("x", "y", "z")
}
else if (ncol(ls_xyz) == 4) {
ls_xyz &lt;- ls_xyz[, 1:4]
colnames(ls_xyz) &lt;- c("x", "y", "z", "label")
}
ls_xyz &lt;- as.list(ls_xyz)
}
else {
stop("The function must apply to a 'list' object, or a
'data.frame'/'matrix' object.\n")
}
if (interpolation == "linear") {
linear &lt;- TRUE
}
else {
linear &lt;- FALSE
}
x &lt;- y &lt;- z &lt;- label &lt;- NULL
ls_xyz.smooth &lt;- with(ls_xyz, akima::interp(x, y, z, nx = nx,
ny = ny, linear = linear))
col &lt;- xColormap(colormap)(nlevels)
if (class(colkey) != "list") {
if (colkey) {
colkey &lt;- list(side = 4, length = 0.15, width = 0.5,
shift = 0.35, dist = -0.15, cex.axis = 0.6, cex.clab = 0.8,
side.clab = 3)
}
}
if (nD == "auto") {
si.zmin &lt;- min(ls_xyz.smooth$z, na.rm = TRUE)
si.zmax &lt;- max(ls_xyz.smooth$z, na.rm = TRUE)
breaks &lt;- pretty(c(si.zmin, si.zmax), nlevels + 1)
colors &lt;- xColormap(colormap)(length(breaks) - 1)
if (image) {
graphics::image(ls_xyz.smooth, axes = FALSE, breaks = breaks,
col = colors, xlim = grDevices::extendrange(ls_xyz.smooth$x,
f = 0.1), ylim = grDevices::extendrange(ls_xyz.smooth$y,
f = 0.1))
}
if (contour) {
if (image) {
graphics::contour(ls_xyz.smooth, add = TRUE,
labcex = 1, levels = breaks, col = "thistle")
}
else {
graphics::contour(ls_xyz.smooth, labcex = 1,
levels = breaks, col = colors)
}
graphics::points(ls_xyz, pch = 20, cex = 1, col = "black")
}
else {
if (!image) {
plot(y ~ x, data = ls_xyz, pch = 20, col = "blue",
axes = FALSE, ann = FALSE)
}
else {
graphics::points(ls_xyz, pch = 20, cex = 1)
}
if (is.null(ls_xyz$label)) {
with(ls_xyz, graphics::text(x, y, formatC(z,
dig = 2), adj = -0.2, cex = 0.6))
}
else {
with(ls_xyz, graphics::text(x, y, label, adj = -0.2,
cex = 0.6))
}
}
}
else if (nD == "2D") {
if (class(contour) != "list") {
if (contour) {
contour &lt;- list(col = "black", labcex = 1, lwd = 2,
alpha = 0.5, addbox = FALSE, nlevels = nlevels)
}
}
graphics::par(mar = c(0, 0, 0, 0))
plot3D::image2D(z = ls_xyz.smooth$z, axes = FALSE, cex.axis = 0.8,
cex.lab = 1.2, col = col, colkey = colkey, clab = clab,
plot = TRUE, lighting = FALSE, lphi = 90, contour = contour)
}
else {
if (is.null(zlim)) {
zlim &lt;- c(floor(min(ls_xyz.smooth$z, na.rm = TRUE) *
100)/100, ceiling(max(ls_xyz.smooth$z, na.rm = TRUE) *
100)/100)
if (verbose) {
now &lt;- Sys.time()
message(sprintf("The range of interpolated values: [%.3f, %.3f]",
zlim[1], zlim[2]), appendLF = TRUE)
}
if (class(contour) != "list" &amp; class(image) != "list") {
if (contour | image) {
zlim &lt;- c(1.5 * zlim[1] - 0.5 * zlim[2], zlim[2])
}
}
}
if (class(contour) == "list" | class(image) == "list") {
graphics::par(mar = c(0, 0, 0, 0))
plot3D::persp3D(z = ls_xyz.smooth$z, axes = FALSE,
box = FALSE, zlim = zlim, cex.axis = 0.8, cex.lab = 1.2,
ticktype = c("simple", "detailed")[1], col = col,
colkey = colkey, clab = clab, bty = "b", facets = TRUE,
curtain = FALSE, plot = TRUE, lighting = TRUE,
lphi = 90, theta = theta.3D, phi = phi.3D, d = 1,
image = image, contour = contour)
}
else {
if (contour | image) {
plot &lt;- FALSE
}
else {
plot &lt;- TRUE
}
graphics::par(mar = c(0, 0, 0, 0))
plot3D::persp3D(z = ls_xyz.smooth$z, axes = FALSE,
box = FALSE, zlim = zlim, cex.axis = 0.8, cex.lab = 1.2,
ticktype = c("simple", "detailed")[1], col = col,
colkey = colkey, clab = clab, bty = "b", facets = TRUE,
curtain = FALSE, plot = plot, lighting = TRUE,
lphi = 90, theta = theta.3D, phi = phi.3D, d = 1)
if (image) {
if (contour) {
plot2 &lt;- FALSE
}
else {
plot2 &lt;- TRUE
}
plot3D::image3D(z = zlim[1], colvar = ls_xyz.smooth$z,
col = col, box = FALSE, colkey = FALSE, add = TRUE,
plot = plot2)
}
if (contour) {
if (image) {
col &lt;- c("thistle", "grey")[2]
}
plot3D::contour3D(z = zlim[1], colvar = ls_xyz.smooth$z,
labcex = 1, col = col, nlevels = nlevels, lwd = 0.8,
box = FALSE, addbox = FALSE, colkey = FALSE,
add = TRUE, plot = TRUE)
}
}
}
invisible(ls_xyz.smooth)
}
</pre>


</body></html>
